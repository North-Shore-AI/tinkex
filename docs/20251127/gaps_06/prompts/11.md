Agent Prompt: Gap #11 - Type-Shape Differences (Python â†” Elixir)

Task Overview
- Bring Tinkex (Elixir) into type-shape parity with the Tinker Python SDK.
- Focus on data-loss fixes, datetime consistency, type safety, and restoring structured metadata/literals.

Key Metrics (from latest analysis)
- Python: 73 modules in `tinker/src/tinker/types` (71 data classes/aliases excluding `__init__.py`)
- Elixir: 72 modules in `lib/tinkex/types`
- Critical data-loss gaps (P0): `GetServerCapabilitiesResponse` (flattens `SupportedModel`), `CheckpointArchiveUrlResponse` (drops `expires`)
- Other gaps: telemetry batch missing platform/sdk_version/session_id, datetime shipped as strings (6 types), type safety gaps (`loss_fn_outputs`, cursor, `loss_fn_config`), future retrieve union modeled as status wrappers, several responses/requests omit Python `type` literals

Required Reading (in this order)
- Gap doc: `./docs/20251127/gaps_06/11_type_shape_differences.md`
- Python refs:
  - `tinker/src/tinker/types/get_server_capabilities_response.py`
  - `tinker/src/tinker/types/checkpoint_archive_url_response.py`
  - `tinker/src/tinker/types/checkpoint.py`
  - `tinker/src/tinker/types/training_run.py`
  - `tinker/src/tinker/types/forward_backward_output.py`
  - `tinker/src/tinker/types/telemetry_batch.py`
  - `tinker/src/tinker/types/future_retrieve_response.py`
- Elixir refs:
  - `lib/tinkex/types/get_server_capabilities_response.ex`
  - `lib/tinkex/types/checkpoint_archive_url_response.ex`
  - `lib/tinkex/types/checkpoint.ex`
  - `lib/tinkex/types/training_run.ex`
  - `lib/tinkex/types/forward_backward_output.ex`
  - `lib/tinkex/types/telemetry/telemetry_batch.ex`
  - `lib/tinkex/types/future_responses.ex`

Critical Fixes (P0)
1) SupportedModel structure  
   - Add `Tinkex.Types.SupportedModel` (preserve all fields; allow string input for backward compat).  
   - Update `GetServerCapabilitiesResponse` to use `[SupportedModel.t()]` and keep a `model_names/1` convenience if helpful.

2) CheckpointArchiveUrlResponse expiry  
   - Add `expires :: DateTime.t() | String.t() | nil` to `CheckpointArchiveUrlResponse`.  
   - Parse ISO8601 via a shared helper; encode back to ISO8601 or omit when nil for backward compatibility.

Type Safety & Shape (P1/P2)
- Datetime standardization (6 fields): `TrainingRun.last_request_time`, `Checkpoint.time`, telemetry event timestamps. Use a central parser; prefer DateTime.t() on decode and ISO8601 on encode.
- `ForwardBackwardOutput.loss_fn_outputs`: type as `[%{String.t() => TensorData.t()}]` and parse values to TensorData.
- `CheckpointsListResponse.cursor`: type as `Cursor.t() | nil` and parse accordingly.
- `ForwardBackwardInput.loss_fn_config`: narrow to numeric map if possible; at minimum document permissiveness.
- `TelemetryBatch`: add `platform`, `sdk_version`, `session_id` fields to match Python; avoid silently dropping them into metadata.
- `FutureRetrieveResponse`: decode typed payloads (FB output, save/load/save-for-sampler/unload/create_model/optim_step/request_failed/try_again) instead of leaving raw maps inside status wrappers.
- Restore Python `type` literals where emitted: `CreateModelResponse`, `CreateSamplingSessionResponse`, `CreateSessionResponse`, `OptimStepRequest` (and any others encountered).

Missing Utility (P3)
- Implement `ParsedCheckpointTinkerPath` equivalent if needed for parity/testing.

Testing Expectations
- Add/extend ExUnit tests covering the new structs/parsers. Use `Supertester.ExUnitFoundation` isolation if processes are started; otherwise normal async is fine.
- Cover: SupportedModel parsing (string + map), server capabilities round-trip, checkpoint archive expiry decode/encode, datetime parsing for the six fields, typed loss_fn_outputs, cursor parsing, telemetry batch fields, and future retrieve typed decoding (if implemented).

Notes
- Preserve backward compatibility where practical (accept legacy shapes, emit new fields when present).
- Avoid new `System.get_env/1` calls; use `Tinkex.Env` if env access is needed (not expected here).
- Keep comments concise; favor clear types/specs over verbose explanations.
